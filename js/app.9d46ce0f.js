(function(t){function e(e){for(var s,i,c=e[0],r=e[1],u=e[2],d=0,l=[];d<c.length;d++)i=c[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&l.push(a[i][0]),a[i]=0;for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s]);h&&h(e);while(l.length)l.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],s=!0,c=1;c<n.length;c++){var r=n[c];0!==a[r]&&(s=!1)}s&&(o.splice(e--,1),t=i(i.s=n[0]))}return t}var s={},a={app:0},o=[];function i(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=s,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/stopList/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var h=r;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"28ce":function(t,e,n){"use strict";var s=n("c9b5"),a=n.n(s);a.a},"4a24":function(t,e,n){"use strict";var s=n("d8c6"),a=n.n(s);a.a},5562:function(t,e,n){},5567:function(t,e,n){"use strict";var s=n("f23f"),a=n.n(s);a.a},"5c0b":function(t,e,n){"use strict";var s=n("9c0c"),a=n.n(s);a.a},"6fb6":function(t,e,n){},"773a":function(t){t.exports=JSON.parse('{"phones":[{"phone":"79000987656"},{"phone":"79010965656"},{"phone":"79020637681"},{"phone":"79060543699"},{"phone":"79120987656"}]}')},"7c56":function(t,e,n){"use strict";var s=n("cd8f"),a=n.n(s);a.a},"9c0c":function(t,e,n){},aea4:function(t,e,n){},bdf3:function(t,e,n){"use strict";var s=n("c333"),a=n.n(s);a.a},c333:function(t,e,n){},c9b5:function(t,e,n){},cb34:function(t,e,n){"use strict";var s=n("5562"),a=n.n(s);a.a},cd49:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},o=[],i=s["a"].extend({name:"App",created:function(){this.$store.dispatch("fetchDataAction")}}),c=i,r=(n("5c0b"),n("2877")),u=Object(r["a"])(c,a,o,!1,null,null,null),h=u.exports,d=n("8c4f"),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main-page"},[n("header",{staticClass:"main-page__header"},[n("span",{staticClass:"main-page__header-title"},[t._v("Главная страница")]),n("Breadcrumbs",{attrs:{breadcrumbsList:t.$route.meta.breadcrumbs}})],1),n("section",{staticClass:"main-page__link"},[n("router-link",{attrs:{to:"/stopList"}},[t._v("Перейти к редактированию стоп-листа")])],1)])},p=[],f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"breadcrumbs"},t._l(t.breadcrumbsList,(function(e,s){return n("div",{key:e.name,staticClass:"breadcrumb"},[n("span",{class:{linked:!e.link},on:{click:function(n){return t.moveTo(e.link)}}},[t._v(" "+t._s(e.name)+" ")]),t.breadcrumbsList.length>1&&s!==t.breadcrumbsList.length-1?n("span",{staticClass:"etc"},[t._v("/")]):t._e()])})),0)},m=[],v=s["a"].extend({name:"breadcrumbs",props:{breadcrumbsList:Array},methods:{moveTo:function(t){t&&this.$router.push(t)}}}),b=v,_=(n("5567"),Object(r["a"])(b,f,m,!1,null,"375c3165",null)),P=_.exports,g=s["a"].extend({name:"main-page",components:{Breadcrumbs:P}}),C=g,y=(n("d39e"),Object(r["a"])(C,l,p,!1,null,"ab6cad48",null)),x=y.exports,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"stop-list"},[n("header",{staticClass:"stop-list__header"},[n("span",{staticClass:"stop-list__header-title"},[t._v("Стоп-лист")]),n("Breadcrumbs",{attrs:{breadcrumbsList:t.$route.meta.breadcrumbs}})],1),n("section",{staticClass:"stop-list__content"},[n("stop-list-actions"),n("stop-list-phones"),n("edit-modal",{directives:[{name:"show",rawName:"v-show",value:!0===t.activeEditModal,expression:"activeEditModal === true"}],attrs:{breadcrumbsList:t.$route.meta.breadcrumbs}})],1)])},O=[],$=n("5530"),E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"stop-list__actions"},[n("Search"),n("add-phone")],1)},L=[],j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search"},[n("i",{staticClass:"fa fa-search"}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery,expression:"searchQuery"}],attrs:{type:"text",placeholder:"Искать"},domProps:{value:t.searchQuery},on:{keypress:function(e){return t.findPhones(e)},input:function(e){e.target.composing||(t.searchQuery=e.target.value)}}}),n("button",{staticClass:"find-phones",on:{click:t.findPhones}},[t._v("НАЙТИ")]),n("button",{staticClass:"clear",on:{click:t.clearSearch}},[n("i",{staticClass:"fa fa-times-circle"})])])},M=[],k=s["a"].extend({name:"search",data:function(){return{searchQuery:""}},methods:{findPhones:function(t){t?"Enter"===t.key&&this.$store.dispatch("setSearchQueryAction",this.searchQuery):this.$store.dispatch("setSearchQueryAction",this.searchQuery)},clearSearch:function(){this.searchQuery="",this.$store.dispatch("setSearchQueryAction",this.searchQuery)}}}),Q=k,w=(n("cb34"),Object(r["a"])(Q,j,M,!1,null,"7141fc41",null)),S=w.exports,I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"add-phone"},[n("button",{staticClass:"add-phone__add",on:{click:t.openEditModal}},[t._v("ДОБАВИТЬ")]),t._m(0),t._m(1)])},N=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"add-phone__save"},[n("i",{staticClass:"fa fa-save"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"add-phone__save"},[n("i",{staticClass:"fa fa-save"})])}],B=s["a"].extend({name:"add-phone",methods:{openEditModal:function(){this.$store.dispatch("setOperationAction","creation"),this.$store.dispatch("setActiveEditModalAction",!0)}}}),T=B,D=(n("28ce"),Object(r["a"])(T,I,N,!1,null,"71e276c4",null)),J=D.exports,V=s["a"].extend({name:"stop-list-actions",components:{Search:S,AddPhone:J}}),q=V,z=(n("e271"),Object(r["a"])(q,E,L,!1,null,"49f24f8d",null)),F=z.exports,G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"stop-list__phones"},[t._m(0),t._l(t.paginatedPhonesList,(function(t){return n("phone-item",{key:t.phone,attrs:{phoneItem:t}})})),n("div",{staticClass:"stop-list__phones-pagination"},[n("div",{staticClass:"select__items"},[n("label",{attrs:{for:"items-count"}},[t._v("Строк на странице:")]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.itemsCount,expression:"itemsCount"}],attrs:{id:"items-count"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.itemsCount=e.target.multiple?n:n[0]}}},[n("option",[t._v("5")]),n("option",[t._v("10")]),n("option",[t._v("15")]),n("option",[t._v("20")]),n("option",[t._v("25")])])]),n("div",{staticClass:"pages"},[n("span",[t._v(t._s(t.currentPage)+" из "+t._s(t.pagesCount))])]),n("div",{staticClass:"buttons"},[n("button",{class:{noVisible:1===t.currentPage},on:{click:t.prevPage}},[t._v("<")]),n("button",{class:{noVisible:t.currentPage===t.pagesCount},on:{click:t.nextPage}},[t._v(">")])])])],2)},H=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"stop-list__phones-header"},[n("span",[t._v("Телефон")]),n("span",[t._v("Действия")])])}],K=(n("4de4"),n("caad"),n("fb6a"),n("2532"),n("2f62")),R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"phone-item"},[n("span",[t._v(t._s(t.phoneItem.phone))]),n("div",{staticClass:"phone-item__actions"},[n("i",{staticClass:"fa fa-pencil",on:{click:t.openPhoneModal}}),n("i",{staticClass:"fa fa-trash",on:{click:t.deletePhone}})])])},U=[],W=s["a"].extend({name:"phone-item",props:{phoneItem:Object},methods:{openPhoneModal:function(){for(var t in this.$store.dispatch("setActiveEditModalAction",!0),this.phonesList)this.phonesList[t].phone===this.phoneItem.phone&&this.$store.dispatch("setPhoneIndexAction",t);this.$store.dispatch("setPhoneNumberAction",this.phoneItem.phone),this.$store.dispatch("setOperationAction","edit")},deletePhone:function(){for(var t in this.phonesList)this.phonesList[t].phone===this.phoneItem.phone&&this.$store.dispatch("deletePhoneAction",t)}},computed:Object($["a"])({},Object(K["b"])(["phonesList"]))}),X=W,Y=(n("bdf3"),Object(r["a"])(X,R,U,!1,null,"00245fd6",null)),Z=Y.exports,tt=s["a"].extend({name:"stop-list-phones",components:{PhoneItem:Z},data:function(){return{itemsCount:5,currentPage:1}},methods:{prevPage:function(){this.currentPage>1&&this.currentPage--},nextPage:function(){this.currentPage<this.pagesCount&&this.currentPage++}},computed:Object($["a"])(Object($["a"])({},Object(K["b"])(["searchQuery","phonesList"])),{},{filteredPhonesList:function(){var t=this,e=this.phonesList;return e=e.filter((function(e){return""===t.searchQuery||e.phone.includes(t.searchQuery)})),e},pagesCount:function(){return Math.ceil(this.filteredPhonesList.length/this.itemsCount)},paginatedPhonesList:function(){var t=this.currentPage*this.itemsCount-this.itemsCount,e=this.currentPage*this.itemsCount;return this.filteredPhonesList.slice(t,e)}}),watch:{phonesList:function(){this.currentPage=1}}}),et=tt,nt=(n("7c56"),Object(r["a"])(et,G,H,!1,null,"1846cc60",null)),st=nt.exports,at=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"edit-modal"},[n("div",{staticClass:"edit-modal__header"},[n("span",{staticClass:"edit-modal__header-title"},[t._v("Стоп-лист")]),n("Breadcrumbs",{attrs:{breadcrumbsList:t.$route.meta.breadcrumbs}})],1),n("div",{staticClass:"edit-modal__input"},["creation"===t.operation?n("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],attrs:{type:"text",placeholder:"Телефон"},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}}):n("input",{attrs:{type:"text",placeholder:"Телефон"},domProps:{value:t.phoneNumber},on:{input:function(e){t.phone=e.target.value}}}),"creation"===t.operation?n("button",{staticClass:"submit",on:{click:t.addPhone}},[n("i",{staticClass:"fa fa-check"})]):n("button",{staticClass:"submit",on:{click:t.editPhone}},[n("i",{staticClass:"fa fa-check"})])]),n("div",{staticClass:"edit-modal__return"},[n("button",{on:{click:t.closeEditModal}},[t._v("НАЗАД")])])])},ot=[],it=(n("ac1f"),n("466d"),s["a"].extend({name:"edit-modal",props:{breadcrumbsList:Array},components:{Breadcrumbs:P},data:function(){return{phone:""}},methods:{closeEditModal:function(){this.$store.dispatch("setActiveEditModalAction",!1)},addPhone:function(){this.phone.match(/^((8|\+7)[- ]?)?(\(?\d{3}\)?[- ]?)?[\d- ]{7,10}$/g)&&(this.$store.dispatch("addPhoneAction",this.phone),this.phone="",this.closeEditModal())},editPhone:function(){this.phone.match(/^((8|\+7)[- ]?)?(\(?\d{3}\)?[- ]?)?[\d- ]{7,10}$/g)&&(this.$store.dispatch("editPhoneAction",{phoneIndex:this.phoneIndex,phoneNumber:this.phone}),this.$store.dispatch("setActiveEditModalAction",!1),this.phone="",this.closeEditModal())}},computed:Object($["a"])({},Object(K["b"])(["operation","phoneIndex","phoneNumber"]))})),ct=it,rt=(n("4a24"),Object(r["a"])(ct,at,ot,!1,null,"50f1dc06",null)),ut=rt.exports,ht=s["a"].extend({name:"stop-list",components:{Breadcrumbs:P,StopListActions:F,StopListPhones:st,EditModal:ut},computed:Object($["a"])({},Object(K["b"])(["activeEditModal"]))}),dt=ht,lt=(n("d929"),Object(r["a"])(dt,A,O,!1,null,"4d73a8cc",null)),pt=lt.exports;s["a"].use(d["a"]);var ft=[{path:"/",name:"Main",component:x,meta:{breadcrumbs:[{name:"Главная"}]}},{path:"/stopList",name:"Stop List",component:pt,meta:{breadcrumbs:[{link:"/",name:"Главная"},{name:"Стоп-лист"}]}}],mt=new d["a"]({mode:"history",base:"/stopList/",routes:ft}),vt=mt,bt=(n("a434"),n("773a"));s["a"].use(K["a"]);var _t=new K["a"].Store({state:{searchQuery:"",phones:[],activeEditModal:!1,phoneIndex:0,phoneNumber:"",operation:""},mutations:{setSearchQuery:function(t,e){t.searchQuery=e},addPhone:function(t,e){t.phones.push({phone:e})},deletePhone:function(t,e){t.phones.splice(e,1)},editPhone:function(t,e){t.phones[e.phoneIndex].phone=e.phoneNumber},fetchData:function(t,e){t.phones=e},setActiveEditModal:function(t,e){t.activeEditModal=e},setPhoneIndex:function(t,e){t.phoneIndex=e},setPhoneNumber:function(t,e){t.phoneNumber=e},setOperation:function(t,e){t.operation=e}},actions:{setSearchQueryAction:function(t,e){var n=t.commit;n("setSearchQuery",e)},addPhoneAction:function(t,e){var n=t.commit;n("addPhone",e)},deletePhoneAction:function(t,e){var n=t.commit;n("deletePhone",e)},editPhoneAction:function(t,e){var n=t.commit;n("editPhone",e)},fetchDataAction:function(t){var e=t.commit;e("fetchData",bt.phones)},setActiveEditModalAction:function(t,e){var n=t.commit;n("setActiveEditModal",e)},setPhoneIndexAction:function(t,e){var n=t.commit;n("setPhoneIndex",e)},setPhoneNumberAction:function(t,e){var n=t.commit;n("setPhoneNumber",e)},setOperationAction:function(t,e){var n=t.commit;n("setOperation",e)}},getters:{searchQuery:function(t){return t.searchQuery},phonesList:function(t){return t.phones},activeEditModal:function(t){return t.activeEditModal},phoneIndex:function(t){return t.phoneIndex},phoneNumber:function(t){return t.phoneNumber},operation:function(t){return t.operation}}});s["a"].config.productionTip=!1,new s["a"]({router:vt,store:_t,render:function(t){return t(h)}}).$mount("#app")},cd8f:function(t,e,n){},d39e:function(t,e,n){"use strict";var s=n("6fb6"),a=n.n(s);a.a},d8c6:function(t,e,n){},d929:function(t,e,n){"use strict";var s=n("f23fb"),a=n.n(s);a.a},e271:function(t,e,n){"use strict";var s=n("aea4"),a=n.n(s);a.a},f23f:function(t,e,n){},f23fb:function(t,e,n){}});
//# sourceMappingURL=app.9d46ce0f.js.map